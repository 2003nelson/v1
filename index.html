<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dinoti - Etapa 1 Final</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f3f4f6; }
        .search-shadow { box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .card-border { border: 1px solid #e5e7eb; border-radius: 28px; transition: transform 0.2s; }
        .card-border:active { transform: scale(0.98); }
        .tag { padding: 4px 12px; border-radius: 8px; font-weight: 600; font-size: 0.75rem; color: white; display: inline-flex; align-items: center; gap: 4px; }
        .brand-logo { height: 48px; width: auto; object-fit: contain; }
        #side-menu { transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 100; overflow-y: auto; }
        .menu-overlay { background: rgba(0,0,0,0.4); backdrop-filter: blur(4px); z-index: 90; }
        
        .btn-create { background-color: #1a1a1a; color: white; padding: 10px 20px; border-radius: 16px; font-weight: 800; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; display: flex; align-items: center; gap: 8px; transition: all 0.2s; width: fit-content; }
        .btn-create:active { transform: scale(0.95); background-color: #000; }

        .carousel-container { display: flex; overflow-x: auto; scroll-snap-type: x mandatory; scrollbar-width: none; -ms-overflow-style: none; }
        .carousel-container::-webkit-scrollbar { display: none; }
        .carousel-item { flex: 0 0 100%; scroll-snap-align: start; position: relative; }
        .photo-counter { position: absolute; top: 12px; right: 12px; background: rgba(0,0,0,0.6); color: white; padding: 4px 10px; border-radius: 20px; font-size: 10px; font-weight: 800; backdrop-filter: blur(4px); z-index: 10;}
        .swipe-hint { animation: bounceSide 2s infinite; }
        @keyframes bounceSide { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(5px); } }

        .btn-follow { padding: 4px 12px; border-radius: 10px; font-size: 10px; font-weight: 800; text-transform: uppercase; transition: all 0.2s; border: 1px solid #e5e7eb; }
        .btn-follow.following { background-color: #1a1a1a; color: white; border-color: #1a1a1a; }
        .btn-follow.not-following { background-color: #f3f4f6; color: #1a1a1a; }

        .creation-container { background-color: #1a1a1a; border: 2px solid #000; border-radius: 28px; padding: 20px; display: none; margin-top: 15px; }
        .creation-input { background: #2a2a2a; border: 1px solid #333; border-radius: 12px; padding: 10px; color: white; width: 100%; margin-bottom: 10px; outline: none; }
        .creation-input:focus { border-color: #00c853; }
        .tag-pill { background: #333; color: #fff; padding: 4px 10px; border-radius: 6px; font-size: 10px; font-weight: bold; cursor: pointer; }
        
        .media-btn { background: #2a2a2a; color: #9ca3af; padding: 8px 12px; border-radius: 12px; font-size: 11px; font-weight: bold; display: flex; align-items: center; gap: 6px; border: 1px dashed #444; transition: all 0.2s; }

        .btn-interaction { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: #fff; border: 1px solid #eee; box-shadow: 0 2px 8px rgba(0,0,0,0.05); transition: all 0.2s; }
        .btn-interaction:active { transform: scale(0.9); background: #fff1f1; }

        #forum-detail-view { display: none; }
    </style>
</head>
<body class="max-w-md mx-auto min-h-screen pb-10 relative">

    <div id="overlay" class="fixed inset-0 menu-overlay hidden" onclick="toggleMenu()"></div>
    <nav id="side-menu" class="fixed top-0 right-0 h-full w-80 bg-white shadow-2xl transform translate-x-full overflow-hidden flex flex-col">
        <div class="bg-gradient-to-br from-[#1a1a1a] to-[#434343] p-8 text-white relative">
            <button onclick="toggleMenu()" class="absolute top-6 right-6 text-white/60 text-2xl hover:text-white">&times;</button>
            <div class="flex items-center gap-4 mb-2">
                <img src="https://i.pravatar.cc/150?u=Nelson" class="w-16 h-16 rounded-2xl border-2 border-white/20 shadow-xl object-cover">
                <div>
                    <h3 class="font-black text-xl tracking-tight leading-none">NelsonPipper</h3>
                    <p class="text-gray-400 text-[10px] mt-1 font-bold uppercase tracking-widest opacity-90">CEO</p>
                </div>
            </div>
        </div>
        <div class="p-6 space-y-4">
            <button class="w-full flex items-center gap-3 p-4 bg-gray-50 rounded-2xl font-bold text-sm hover:bg-gray-100 transition-all">
                <i class="fa-solid fa-user-gear"></i> Editar Perfil
            </button>
            <button class="w-full flex items-center gap-3 p-4 text-red-500 font-bold text-sm hover:bg-red-50 rounded-2xl transition-colors">
                <i class="fa-solid fa-arrow-right-from-bracket"></i> Cerrar Sesión
            </button>
        </div>
    </nav>

    <header class="px-5 pt-8 pb-4 bg-[#f3f4f6] sticky top-0 z-40">
        <div class="flex justify-between items-center mb-5">
            <img src="imgsdinoti/dinotilogo.png.png" class="brand-logo" onerror="this.src='https://via.placeholder.com/120x48?text=dinoti'">
            <button onclick="toggleMenu()" class="bg-white border border-gray-200 p-2 rounded-full w-12 h-12 flex items-center justify-center shadow-sm active:scale-90 transition-transform">
                <i class="fa-solid fa-user text-2xl"></i>
            </button>
        </div>
        <div id="search-bar" class="flex gap-2">
            <div class="relative flex-grow">
                <i class="fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                <input type="text" placeholder="¿Qué quieres descubrir hoy?" class="w-full pl-11 pr-4 py-3.5 bg-white border border-gray-300 rounded-2xl text-sm focus:outline-none focus:border-black search-shadow">
            </div>
            <button class="bg-[#00c853] text-white font-bold px-4 rounded-2xl uppercase text-[10px] tracking-widest shadow-lg shadow-green-100">Buscar</button>
        </div>
    </header>

    <div id="feed-view">
        <div class="px-6 py-4">
            <button class="btn-create" onclick="toggleCreationArea()">
                <i class="fa-solid fa-plus"></i>
                <span id="btn-text">Crear</span>
            </button>

            <div id="creation-area" class="creation-container">
                <h4 class="text-white font-black text-[10px] uppercase tracking-widest mb-3">Nueva Publicación</h4>
                <input type="text" placeholder="Título impactante..." class="creation-input font-bold">
                <textarea placeholder="¿Qué tienes en mente?" class="creation-input h-20 resize-none text-sm"></textarea>
                
                <div class="flex gap-3 mb-4">
                    <button class="media-btn flex-1"><i class="fa-solid fa-image"></i> Foto</button>
                    <button class="media-btn flex-1"><i class="fa-solid fa-clapperboard"></i> Video</button>
                </div>

                <div class="mb-3">
                    <p class="text-gray-500 text-[9px] font-bold uppercase mb-2">Crea Tus Etiquetas:</p>
                    <div id="user-tags-container" class="flex flex-wrap gap-2 mb-2"></div>
                    <div class="flex gap-2">
                        <input id="new-tag-input" type="text" placeholder="#" class="creation-input mb-0 text-xs py-1 w-24">
                        <button onclick="addTag()" class="bg-[#00c853] text-white px-3 rounded-lg text-[10px] font-bold uppercase">Añadir</button>
                    </div>
                </div>

                <button class="w-full bg-white text-black font-black py-3 rounded-xl text-xs uppercase tracking-widest mt-2 hover:bg-gray-200">Publicar Ahora</button>
            </div>
        </div>

        <main id="feed-container" class="px-4 mt-0">
            <h2 class="text-2xl font-black mb-5 px-2 text-gray-900">Explora La Comunidad</h2>
            <div id="posts-wrapper"></div>
        </main>
    </div>

    <div id="forum-detail-view" class="px-4">
        <button onclick="closeForum()" class="mb-6 mt-2 flex items-center gap-2 text-blue-600 font-bold text-sm">
            <i class="fa-solid fa-chevron-left"></i> Volver al Inicio
        </button>
        <div id="forum-content-main"></div>
        <div class="mt-8 space-y-4" id="forum-replies"></div>
    </div>

<script>
const dinotiColors = ["bg-[#ff7043]", "bg-[#26c6da]", "bg-[#cddc39]", "bg-pink-500"];
const defaultNames = ["Tecno", "Arte", "Debate", "IA", "Naturaleza", "Viajes", "Deporte", "Economia"];
const userTags = ["#Random", "#MiPost", "#Hack", "#Viral", "#Trend"];
const postDate = "05/02/2026";

const topics = [
    { t: "Mejores rutas para senderismo", desc: "Un espacio para compartir las rutas más extremas y bellas de Latinoamérica.", img: "https://picsum.photos/seed/hiking/800/500", count: 5, members: 124 },
    { t: "La IA en el arte moderno", desc: "¿Es el arte generado por IA arte real? Debatamos sobre el futuro creativo.", img: "https://picsum.photos/seed/ai/800/500", count: 1, members: 89 },
    { t: "Economía digital 2024", desc: "Bitcoin, ETFs y el mercado actual.", img: "https://picsum.photos/seed/money/800/500", count: 1, members: 256 }
];

function toggleCreationArea() {
    const area = document.getElementById('creation-area');
    const btnText = document.getElementById('btn-text');
    const isOpen = area.style.display === 'block';
    area.style.display = isOpen ? 'none' : 'block';
    btnText.innerText = isOpen ? 'Crear' : 'Cerrar';
}

function openForum(index) {
    const post = topics[index];
    document.getElementById('feed-view').style.display = 'none';
    document.getElementById('forum-detail-view').style.display = 'block';
    window.scrollTo(0, 0);

    document.getElementById('forum-content-main').innerHTML = `
        <h1 class="text-3xl font-black text-gray-900 leading-tight mb-4">${post.t}</h1>
        <p class="text-gray-600 text-sm mb-6 bg-white p-4 rounded-2xl border border-gray-100">${post.desc}</p>
        <div class="w-full aspect-video rounded-[32px] overflow-hidden mb-6 shadow-xl border-4 border-white">
            <img src="${post.img}" class="w-full h-full object-cover">
        </div>
        <div class="flex items-center justify-between bg-white p-4 rounded-2xl border border-gray-100 shadow-sm">
            <div class="flex items-center gap-4">
                 <span class="text-xs font-black text-gray-400 uppercase"><i class="fa-solid fa-users text-blue-500"></i> ${post.members}</span>
                 <span class="text-xs font-black text-gray-400 uppercase"><i class="fa-solid fa-heart text-red-500"></i> ${250 + index}</span>
            </div>
            <button class="bg-[#00c853] text-white px-6 py-2 rounded-xl font-black text-xs uppercase tracking-widest shadow-lg shadow-green-100">Comentar</button>
        </div>
    `;
    loadForumReplies();
}

function closeForum() {
    document.getElementById('feed-view').style.display = 'block';
    document.getElementById('forum-detail-view').style.display = 'none';
}

function loadForumReplies() {
    const container = document.getElementById('forum-replies');
    container.innerHTML = `<h4 class="text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2">Participaciones Recientes</h4>`;
    for(let i=0; i<2; i++) {
        container.innerHTML += `
            <div class="bg-white p-5 rounded-[28px] border border-gray-100 shadow-sm">
                <div class="flex justify-between items-center mb-3">
                    <div class="flex items-center gap-3">
                        <img src="https://i.pravatar.cc/150?u=a${i}" class="w-10 h-10 rounded-full">
                        <div>
                            <p class="text-xs font-black text-gray-900">User_Expert_${i}</p>
                            <span class="text-[9px] text-gray-400 font-bold uppercase tracking-widest">${postDate}</span>
                        </div>
                    </div>
                </div>
                <div class="text-sm text-gray-800 leading-snug">Excelente aporte. Me interesa saber más.</div>
            </div>`;
    }
}

// RENDER FEED CON ETIQUETAS E ICONO
const postsWrapper = document.getElementById('posts-wrapper');
topics.forEach((post, i) => {
    let tagsHtml = "";
    const tagLimit = (i === 0) ? 8 : 4;
    for (let j = 0; j < tagLimit; j++) {
        const color = Math.random() > 0.5 ? "bg-black" : dinotiColors[Math.floor(Math.random() * dinotiColors.length)];
        const name = Math.random() > 0.5 ? userTags[Math.floor(Math.random() * userTags.length)] : defaultNames[Math.floor(Math.random() * defaultNames.length)];
        tagsHtml += `<span class="tag ${color}">${name}</span>`;
    }

    postsWrapper.innerHTML += `
        <div class="card-border p-5 mb-6 bg-white shadow-md">
            <div class="flex justify-between items-start mb-4 gap-2">
                <div class="flex items-center gap-3">
                    <img src="https://i.pravatar.cc/150?u=${i+10}" class="w-11 h-11 rounded-full object-cover">
                    <div class="flex items-center gap-2">
                        <span class="font-bold text-gray-900 text-sm">Usuario_${i*33}</span>
                        <button onclick="toggleFollow(this)" class="btn-follow not-following">Seguir</button>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <div class="text-[9px] border border-gray-100 rounded-full px-2 py-1 text-gray-400 font-black bg-gray-50 uppercase tracking-tighter">${postDate}</div>
                    <button onclick="toggleSave(this)" class="text-gray-400"><i class="fa-regular fa-bookmark text-lg"></i></button>
                </div>
            </div>
            <h3 class="text-lg font-bold leading-tight mb-4 text-gray-900">${post.t}</h3>
            <div class="w-full aspect-video rounded-[24px] overflow-hidden border border-gray-50 shadow-inner">
                <img src="${post.img}?sig=${i}" class="w-full h-full object-cover">
            </div>
            <div class="flex items-center justify-between mt-5 mb-5 px-1">
                <div class="flex items-center gap-3">
                    <button onclick="openForum(${i})" class="bg-[#0052cc] text-white px-7 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-blue-100">Ver Foro</button>
                    <button onclick="toggleLike(this)" class="btn-interaction"><i class="fa-regular fa-heart text-red-500 text-lg"></i></button>
                </div>
                <div class="flex items-center gap-4 text-gray-500 font-bold text-[11px] uppercase tracking-tighter">
                    <span class="flex items-center gap-1.5"><i class="fa-regular fa-comment text-blue-500 text-sm"></i> ${i + 2}</span>
                    <span class="flex items-center gap-1.5"><i class="fa-solid fa-users text-gray-400 text-sm"></i> ${post.members}</span>
                    <span class="flex items-center gap-1.5 text-gray-900"><i class="fa-solid fa-heart text-red-500 text-sm"></i> ${200 + i*45}</span>
                </div>
            </div>
            
            <hr class="border-dashed border-gray-300 mb-4">
            
            <div class="flex items-center gap-2 mb-3 text-gray-400">
                <i class="fa-solid fa-tags text-[10px]"></i>
                <span class="text-[9px] font-black uppercase tracking-widest">Explorar Etiquetas:</span>
            </div>
            <div class="flex flex-wrap items-center gap-2">${tagsHtml}</div>
        </div>`;
});

function toggleMenu() {
    document.getElementById('side-menu').classList.toggle('translate-x-full');
    document.getElementById('overlay').classList.toggle('hidden');
}

function toggleFollow(btn) {
    const isFollowing = btn.innerText === "SEGUIR";
    btn.innerText = isFollowing ? "SIGUIENDO" : "SEGUIR";
    btn.classList.toggle('not-following', !isFollowing);
    btn.classList.toggle('following', isFollowing);
}

function toggleSave(btn) {
    const icon = btn.querySelector('i');
    const isSaved = icon.classList.contains('fa-regular');
    icon.classList.toggle('fa-regular', !isSaved);
    icon.classList.toggle('fa-solid', isSaved);
    icon.classList.toggle('text-gray-900', isSaved);
}

function toggleLike(btn) {
    const icon = btn.querySelector('i');
    const isLiked = icon.classList.contains('fa-regular');
    icon.classList.toggle('fa-regular', !isLiked);
    icon.classList.toggle('fa-solid', isLiked);
}
</script>
</body>
</html>
